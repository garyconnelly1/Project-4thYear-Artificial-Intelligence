package ie.gmit.sw.ai;

public class SpiderController {
	
	private static boolean isValidMove(Spider thread, int row, int col) {
		
		  if(thread.getPlayer().isGameOver()) return false;
	        if((row < 0) || (col < 0) || !(row <= thread.getMaze().length - 1 && col <= thread.getMaze()[row].length - 1)) return false;

	        switch(thread.getMaze()[row][col].getNodeType()){
	            case ' ':
	            	thread.getMaze()[thread.getRowPos()][thread.getColPos()].setNodeType(' '); // Paint the road where the spider was.
	            	thread.getMaze()[row][col].setNodeType('S');
	                if(thread.isAstar())
	                	thread.getMaze()[row][col].setNodeType('A');
	                thread.getMaze()[row][col].setEnemyID(thread.getMaze()[thread.getRowPos()][thread.getColPos()].getEnemyID());
	                thread.getMaze()[thread.getRowPos()][thread.getColPos()].setEnemyID(0);
	                return true;
	            case 'P': 
	            	if(thread.isAstar()) {
	            		
	            		return fight(row,col);
	            	
	            	}else {
	            		
	            		return classify(row, col);
	    		
	            	}
	                
	                
	        	case 'Q':
	                thread.getMaze()[thread.getRowPos()][thread.getColPos()].setNodeType(' ');
	                if(thread.isAstar())
	                	thread.getMaze()[row][col].setNodeType('A');
	                thread.getMaze()[row][col].setEnemyID(thread.getMaze()[thread.getRowPos()][thread.getColPos()].getEnemyID());
	                thread.getMaze()[thread.getRowPos()][thread.getColPos()].setEnemyID(0);
	                return true;
	            default:
	                return false;
	        }
		//return false;
	}
	
	
	
	
	 public boolean fight(Spider thread, int row, int col) {
     	FuzzyFight fuzzyFight = new FuzzyFight();
         boolean enemyWon = fuzzyFight.startBattle(thread.getPlayer(), thread, "fcl/fuzzyFight.fcl");
         if(enemyWon == true){
             // The player has lost the game!
             thread.getMaze()[thread.getRowPos()][thread.getColPos()].setNodeType(' ');
             thread.getMaze()[thread.getRowPos()][thread.getColPos()].setEnemyID(0);
             thread.getPlayer().setGameOver(true);
             thread.getMaze()[row][col].setNodeType('L');
             
         }else{
             thread.getMaze()[thread.getRowPos()][thread.getColPos()].setNodeType('D');
             if(thread.isAstar())
                 thread.getMaze()[thread.getRowPos()][thread.getColPos()].setNodeType('D');
             thread.getMaze()[thread.getRowPos()][thread.getColPos()].setEnemyID(0);
             thread.setHealth(0);
             
         }
         return enemyWon;
	    }

}
